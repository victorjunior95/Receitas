{"ast":null,"code":"var _jsxFileName = \"/home/cliente/Trybe/trybe-projects/sd-08-project-recipes-app/src/context/Provider.js\";\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport LariContext from './Context';\nimport { headerSearch, fetchFood, fetchDrink } from '../services';\n\nconst Provider = ({\n  children\n}) => {\n  const history = useHistory();\n\n  const redirectPages = path => {\n    history.push(path);\n  };\n\n  const [food, setFood] = useState([]);\n  const [drink, setDrink] = useState([]);\n  const [nameIngredient, setNameIngredient] = useState('');\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [isMeal, setIsMeal] = useState(true);\n  const [foodDetails, setFoodDetails] = useState({}); // const [ingredients, setIngredients] = useState([]);\n\n  const [hidden, setHidden] = useState(false);\n  const [usedIngri, setUseIngri] = useState(['ElisaEumaGenia']);\n  const [inProgress, setInProgress] = useState({});\n  const [favoriteRecipe, setFavoriteRecipe] = useState({});\n\n  const setMeals = async array => {\n    if (array.meals === null) {\n      // eslint-disable-next-line no-alert\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n    } else if (array.meals.length === 1) {\n      const {\n        idMeal\n      } = array.meals[0];\n      redirectPages(`/comidas/${idMeal}`);\n    } else {\n      setFood(array ? array.meals : []);\n    }\n  };\n\n  const setDrinks = async array => {\n    if (array.drinks === null) {\n      // eslint-disable-next-line no-alert\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n    } else if (array.drinks.length === 1) {\n      const {\n        idDrink\n      } = array.drinks[0];\n      redirectPages(`/bebidas/${idDrink}`);\n    } else {\n      setDrink(array ? array.drinks : []);\n    }\n  };\n\n  const recipesFetch = async isMeals => {\n    let results = {};\n\n    if (isMeals) {\n      results = await fetchFood();\n      setFood(results.meals);\n    } else {\n      results = await fetchDrink();\n      setDrink(results.drinks);\n    }\n\n    return results;\n  };\n\n  const handleHeaderSearch = async (search, type, typeAPI) => {\n    const isDrinkApi = typeAPI === 'Bebidas';\n    const results = await headerSearch(search, type, isDrinkApi);\n\n    if (isDrinkApi) {\n      setDrinks(results); // console.log(results);\n    } else {\n      setMeals(results);\n    }\n  };\n\n  const saveFavoriteRecipes = () => {\n    let results = {};\n\n    if (isMeal) {\n      results = {\n        id: foodDetails.idMeal,\n        type: 'comida',\n        area: foodDetails.strArea,\n        category: foodDetails.strCategory,\n        alcoholicOrNot: '',\n        name: foodDetails.strMeal,\n        image: foodDetails.strMealThumb\n      };\n    } else {\n      results = {\n        id: foodDetails.idDrink,\n        type: 'bebida',\n        area: '',\n        category: foodDetails.strCategory,\n        alcoholicOrNot: foodDetails.strAlcoholic,\n        name: foodDetails.strDrink,\n        image: foodDetails.strDrinkThumb\n      };\n    }\n\n    return results; // setFavoriteRecipe(results);\n  };\n\n  const handleIsFavorite = favorite => {\n    // const [,, id] = location.pathname.split('/');\n    const savedFavoriteRecipe = saveFavoriteRecipes();\n    localStorage.setItem('isFavorite', favorite);\n    setIsFavorite(favorite);\n    const recipeFavorite = JSON.parse(localStorage.getItem('favoriteRecipes')) || [];\n    let result = '';\n\n    if (favorite) {\n      result = [...recipeFavorite, savedFavoriteRecipe];\n    } else if (isMeal) {\n      result = recipeFavorite.filter(recipe => recipe.id !== foodDetails.idMeal);\n    } else {\n      result = recipeFavorite.filter(recipe => recipe.id !== foodDetails.idDrink);\n    }\n\n    localStorage.setItem('favoriteRecipes', JSON.stringify(result));\n  }; // console.log(drink);\n\n\n  const context = {\n    handleHeaderSearch,\n    food,\n    drink,\n    recipesFetch,\n    nameIngredient,\n    setNameIngredient,\n    isFavorite,\n    setIsFavorite,\n    isMeal,\n    setIsMeal,\n    foodDetails,\n    setFoodDetails,\n    hidden,\n    setHidden,\n    usedIngri,\n    setUseIngri,\n    inProgress,\n    setInProgress,\n    handleIsFavorite,\n    favoriteRecipe,\n    setFavoriteRecipe\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(LariContext.Provider, {\n    value: context,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, children));\n};\n\nProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default Provider;","map":{"version":3,"sources":["/home/cliente/Trybe/trybe-projects/sd-08-project-recipes-app/src/context/Provider.js"],"names":["React","useState","PropTypes","useHistory","LariContext","headerSearch","fetchFood","fetchDrink","Provider","children","history","redirectPages","path","push","food","setFood","drink","setDrink","nameIngredient","setNameIngredient","isFavorite","setIsFavorite","isMeal","setIsMeal","foodDetails","setFoodDetails","hidden","setHidden","usedIngri","setUseIngri","inProgress","setInProgress","favoriteRecipe","setFavoriteRecipe","setMeals","array","meals","alert","length","idMeal","setDrinks","drinks","idDrink","recipesFetch","isMeals","results","handleHeaderSearch","search","type","typeAPI","isDrinkApi","saveFavoriteRecipes","id","area","strArea","category","strCategory","alcoholicOrNot","name","strMeal","image","strMealThumb","strAlcoholic","strDrink","strDrinkThumb","handleIsFavorite","favorite","savedFavoriteRecipe","localStorage","setItem","recipeFavorite","JSON","parse","getItem","result","filter","recipe","stringify","context","propTypes","node","isRequired"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport LariContext from './Context';\nimport { headerSearch, fetchFood, fetchDrink } from '../services';\n\nconst Provider = ({ children }) => {\n  const history = useHistory();\n  const redirectPages = (path) => {\n    history.push(path);\n  };\n  const [food, setFood] = useState([]);\n  const [drink, setDrink] = useState([]);\n  const [nameIngredient, setNameIngredient] = useState('');\n  const [isFavorite, setIsFavorite] = useState(false);\n  const [isMeal, setIsMeal] = useState(true);\n  const [foodDetails, setFoodDetails] = useState({});\n  // const [ingredients, setIngredients] = useState([]);\n  const [hidden, setHidden] = useState(false);\n  const [usedIngri, setUseIngri] = useState(['ElisaEumaGenia']);\n  const [inProgress, setInProgress] = useState({});\n  const [favoriteRecipe, setFavoriteRecipe] = useState({});\n  const setMeals = async (array) => {\n    if (array.meals === null) {\n      // eslint-disable-next-line no-alert\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n    } else if (array.meals.length === 1) {\n      const { idMeal } = array.meals[0];\n      redirectPages(`/comidas/${idMeal}`);\n    } else {\n      setFood(array ? array.meals : []);\n    }\n  };\n  const setDrinks = async (array) => {\n    if (array.drinks === null) {\n      // eslint-disable-next-line no-alert\n      alert('Sinto muito, não encontramos nenhuma receita para esses filtros.');\n    } else if (array.drinks.length === 1) {\n      const { idDrink } = array.drinks[0];\n      redirectPages(`/bebidas/${idDrink}`);\n    } else {\n      setDrink(array ? array.drinks : []);\n    }\n  };\n\n  const recipesFetch = async (isMeals) => {\n    let results = {};\n    if (isMeals) {\n      results = await fetchFood();\n      setFood(results.meals);\n    } else {\n      results = await fetchDrink();\n      setDrink(results.drinks);\n    }\n    return results;\n  };\n\n  const handleHeaderSearch = async (search, type, typeAPI) => {\n    const isDrinkApi = typeAPI === 'Bebidas';\n    const results = await headerSearch(search, type, isDrinkApi);\n    if (isDrinkApi) {\n      setDrinks(results);\n      // console.log(results);\n    } else {\n      setMeals(results);\n    }\n  };\n\n  const saveFavoriteRecipes = () => {\n    let results = {};\n    if (isMeal) {\n      results = {\n        id: foodDetails.idMeal,\n        type: 'comida',\n        area: foodDetails.strArea,\n        category: foodDetails.strCategory,\n        alcoholicOrNot: '',\n        name: foodDetails.strMeal,\n        image: foodDetails.strMealThumb,\n      };\n    } else {\n      results = {\n        id: foodDetails.idDrink,\n        type: 'bebida',\n        area: '',\n        category: foodDetails.strCategory,\n        alcoholicOrNot: foodDetails.strAlcoholic,\n        name: foodDetails.strDrink,\n        image: foodDetails.strDrinkThumb,\n      };\n    }\n    return results;\n    // setFavoriteRecipe(results);\n  };\n  const handleIsFavorite = (favorite) => {\n    // const [,, id] = location.pathname.split('/');\n    const savedFavoriteRecipe = saveFavoriteRecipes();\n    localStorage.setItem('isFavorite', favorite);\n    setIsFavorite(favorite);\n    const recipeFavorite = JSON.parse(localStorage.getItem('favoriteRecipes')) || [];\n    let result = '';\n    if (favorite) {\n      result = [...recipeFavorite, savedFavoriteRecipe];\n    } else if (isMeal) {\n      result = recipeFavorite.filter((recipe) => recipe.id !== foodDetails.idMeal);\n    } else {\n      result = recipeFavorite.filter((recipe) => recipe.id !== foodDetails.idDrink);\n    }\n    localStorage.setItem('favoriteRecipes', JSON.stringify(result));\n  };\n  // console.log(drink);\n\n  const context = {\n    handleHeaderSearch,\n    food,\n    drink,\n    recipesFetch,\n    nameIngredient,\n    setNameIngredient,\n    isFavorite,\n    setIsFavorite,\n    isMeal,\n    setIsMeal,\n    foodDetails,\n    setFoodDetails,\n    hidden,\n    setHidden,\n    usedIngri,\n    setUseIngri,\n    inProgress,\n    setInProgress,\n    handleIsFavorite,\n    favoriteRecipe,\n    setFavoriteRecipe,\n  };\n  return (\n    <div>\n      <LariContext.Provider value={ context }>\n        {children}\n      </LariContext.Provider>\n    </div>\n  );\n};\nProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\nexport default Provider;\n"]},"metadata":{},"sourceType":"module"}